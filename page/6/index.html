<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>chic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="chic">
<meta property="og:url" content="http://example.com/page/6/index.html">
<meta property="og:site_name" content="chic">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="chic" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/fork-awesome@1.2.0/css/fork-awesome.min.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">chic</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-coding/2024-08-13-generator" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/coding/2024-08-13-generator/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/coding/">coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/coding/2024-08-13-generator/">generator</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>要将这些生成器对象合并成一个包含 <code>n</code> 行的 JSONL 文件，每行包含字典中的每个字段的一条记录，可以按照以下步骤进行操作：</p>
<ol>
<li>从每个生成器中逐条读取数据。</li>
<li>将每条数据合并成一行。</li>
<li>将合并后的数据写入 JSONL 文件。</li>
</ol>
<p>以下是一个示例代码，展示了如何实现这一过程：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="comment"># 假设你的生成器对象存储在一个字典中</span></span><br><span class="line">generators = &#123;</span><br><span class="line">    <span class="string">&#x27;gpt4&#x27;</span>: &lt;generator <span class="built_in">object</span> read_jsonl at <span class="number">0x7fd495aa32e0</span>&gt;,</span><br><span class="line">    <span class="string">&#x27;llama3-8b&#x27;</span>: &lt;generator <span class="built_in">object</span> read_jsonl at <span class="number">0x7fd495b41a80</span>&gt;,</span><br><span class="line">    <span class="string">&#x27;glm4-9b&#x27;</span>: &lt;generator <span class="built_in">object</span> read_jsonl at <span class="number">0x7fd495b42e30</span>&gt;,</span><br><span class="line">    <span class="string">&#x27;qwen2-7b&#x27;</span>: &lt;generator <span class="built_in">object</span> read_jsonl at <span class="number">0x7fd495b40f40</span>&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 打开一个文件用于写入 JSONL 数据</span></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;merged_output.jsonl&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> outfile:</span><br><span class="line">    <span class="comment"># 逐条读取生成器中的数据</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="built_in">range</span>(n):  <span class="comment"># 假设 n 是每个生成器的条数</span></span><br><span class="line">        merged_line = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> key, generator <span class="keyword">in</span> generators.items():</span><br><span class="line">            merged_line[key] = <span class="built_in">next</span>(generator)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># 将合并后的数据写入 JSONL 文件</span></span><br><span class="line">        json.dump(merged_line, outfile)</span><br><span class="line">        outfile.write(<span class="string">&#x27;\n&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在这个示例中：</p>
<ol>
<li><code>generators</code> 字典包含了你的生成器对象。</li>
<li><code>with open(&#39;merged_output.jsonl&#39;, &#39;w&#39;) as outfile:</code> 打开一个文件用于写入 JSONL 数据。</li>
<li><code>for _ in range(n):</code> 循环 <code>n</code> 次，每次从每个生成器中读取一条数据。</li>
<li><code>merged_line = &#123;&#125;</code> 初始化一个空字典用于存储合并后的数据。</li>
<li><code>for key, generator in generators.items():</code> 遍历每个生成器，读取当前条数据并存储在 <code>merged_line</code> 字典中。</li>
<li><code>json.dump(merged_line, outfile)</code> 将合并后的数据写入文件，<code>outfile.write(&#39;\n&#39;)</code> 写入换行符以分隔每行数据。</li>
</ol>
<p>请确保在运行代码之前，将 <code>n</code> 替换为实际的生成器条数。这样，你就可以将这些生成器对象合并成一个包含 <code>n</code> 行的 JSONL 文件，每行包含字典中的每个字段的一条记录。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/coding/2024-08-13-generator/" data-id="cmfp6md4m000fsi2bak8lg6e2" data-title="generator" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-coding/2024-08-13-python开多进程" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/coding/2024-08-13-python%E5%BC%80%E5%A4%9A%E8%BF%9B%E7%A8%8B/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/coding/">coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/coding/2024-08-13-python%E5%BC%80%E5%A4%9A%E8%BF%9B%E7%A8%8B/">python开多进程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="多进程一键开启"><a href="#多进程一键开启" class="headerlink" title="多进程一键开启"></a>多进程一键开启</h1><h2 id="使用-multiprocessing-库"><a href="#使用-multiprocessing-库" class="headerlink" title="使用 multiprocessing 库"></a>使用 <code>multiprocessing</code> 库</h2><h3 id="经典方法"><a href="#经典方法" class="headerlink" title="经典方法"></a>经典方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Pool</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">long_time_task</span>(<span class="params">name</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Run Task <span class="subst">&#123;name&#125;</span> <span class="subst">&#123;os.getpid()&#125;</span>...&#x27;</span>)</span><br><span class="line">    start = time.time()</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Task <span class="subst">&#123;name&#125;</span> Run <span class="subst">&#123;(end - start):<span class="number">.2</span>f&#125;</span> seconds.&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> name</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    t_one = time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Parent process <span class="subst">&#123;os.getpid()&#125;</span>.&#x27;</span>)</span><br><span class="line">    p = Pool(<span class="number">34</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">34</span>):</span><br><span class="line">        p.apply_async(long_time_task, args=(i,))</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;waiting for all subprocesses done...&#x27;</span>)</span><br><span class="line">    p.close()</span><br><span class="line">    p.join()</span><br><span class="line">    t_two = time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;All subprocesses done. <span class="subst">&#123;t_two - t_one:<span class="number">.2</span>f&#125;</span> seconds.&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="进程池的进程数选用"><a href="#进程池的进程数选用" class="headerlink" title="进程池的进程数选用"></a>进程池的进程数选用</h3><ul>
<li>可以填入 <code>multiprocessing.cpu_count()</code>。</li>
<li>IO密集型选用 <code>multiprocessing.cpu_count() + n</code>，<code>n</code> 根据情况自选。</li>
<li>CPU密集型可直接选用 <code>multiprocessing.cpu_count()</code>。</li>
</ul>
<h2 id="使用-tqdm-库"><a href="#使用-tqdm-库" class="headerlink" title="使用 tqdm 库"></a>使用 <code>tqdm</code> 库</h2><h3 id="更简便的方法"><a href="#更简便的方法" class="headerlink" title="更简便的方法"></a>更简便的方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tqdm.contrib.concurrent <span class="keyword">import</span> process_map</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">long_time_task</span>(<span class="params">name, sign</span>):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Run Task <span class="subst">&#123;name&#125;</span> <span class="subst">&#123;sign&#125;</span> (<span class="subst">&#123;os.getpid()&#125;</span>)...&#x27;</span>)</span><br><span class="line">    start = time.time()</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Task <span class="subst">&#123;name&#125;</span> Run <span class="subst">&#123;(end - start):<span class="number">.2</span>f&#125;</span> seconds.&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> name</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_generator</span>(<span class="params">m</span>):</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">            <span class="keyword">yield</span> <span class="string">&quot;my love&quot;</span></span><br><span class="line"></span><br><span class="line">    r = process_map(long_time_task, <span class="built_in">range</span>(<span class="number">112</span>), _generator(<span class="number">112</span>), max_workers=<span class="number">34</span>)</span><br><span class="line">    <span class="built_in">print</span>(multiprocessing.cpu_count())</span><br><span class="line">    <span class="built_in">print</span>(r)</span><br></pre></td></tr></table></figure>

<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>写法更简便，具有进度条功能。</li>
<li>入参需要将参数生成写在内部（传生成器进去）。</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/coding/2024-08-13-python%E5%BC%80%E5%A4%9A%E8%BF%9B%E7%A8%8B/" data-id="cmfp6md4n000jsi2b7eke5luu" data-title="python开多进程" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B/" rel="tag">多进程</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-coding/2024-08-13-python爬虫图解" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/coding/2024-08-13-python%E7%88%AC%E8%99%AB%E5%9B%BE%E8%A7%A3/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/coding/">coding</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/coding/2024-08-13-python%E7%88%AC%E8%99%AB%E5%9B%BE%E8%A7%A3/">python爬虫图解</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="发送http请求"><a href="#发送http请求" class="headerlink" title="发送http请求"></a>发送http请求</h1><p>以csdn为例，鼠标右键点击检查（或<code>F12</code>进入开发者模式），然后点击Network，刷新网页，继续点击Name列表中的第一个。我们发现此网站的请求方式为GET，请求头Headers反映用户电脑系统、浏览器版本等信息。</p>
<p>在展开框中选择请求标头，一般拿到Cookie和User-Agent就可以（前者用来加载登陆状态，后者用来伪装浏览器访问）。</p>
<p>构造一个请求</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">url = &#x27;https://blog.csdn.net/xxx/.html&#x27;</span><br><span class="line">header = &#123;</span><br><span class="line">    &quot;User-Agent&quot;: &quot;Mozilla/5.0 (xxx)&quot;,</span><br><span class="line">    &quot;Cookie&quot;: &quot;uuid_tt_dd=xxxxx&quot;</span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(url, headers=header, verify=False, timeout=10)</span><br></pre></td></tr></table></figure>

<p><code>verify</code>设为False可以规避认证问题，同样也存在风险（有可能被第三方攻击）。真正的勇士从不在意这些。</p>
<p>作为进阶，你还可以随机设一些user-agent列表来模拟不同浏览器访问。</p>
<h1 id="解析网页内容"><a href="#解析网页内容" class="headerlink" title="解析网页内容"></a>解析网页内容</h1><p>有很多方式，这里使用<code> BeautifulSoup</code>（TODO: 不同解析库的异同、哪个是如今最流行的）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(response.content, &#x27;html.parser&#x27;)</span><br><span class="line">print(soup.prettify())  # 输出页面内容，帮助你理解页面结构</span><br><span class="line"># 提取文章链接</span><br><span class="line">article_list = soup.find(&#x27;ul&#x27;, class_=&#x27;column_article_list&#x27;)</span><br></pre></td></tr></table></figure>

<p>基本上，soup.find能解决百分之90的问题，核心在于你要先找到自己想爬取的内容在哪里。<br>一种方式是，在你想要爬取的内容上右击，选择<code>检查</code>，会自动引到对应的源代码。</p>
<p>图片区域</p>
<p>以上是通过右击找到了csdn首页的推荐文章列表，如果想要爬取首页这一列所有的推荐文章链接，可以看到，它们都属于<code>&lt;div class=&quot;Community&quot;&gt;</code>这个大类。那么你可以：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">article_list = soup.find(<span class="string">&#x27;div&#x27;</span>, class_=<span class="string">&#x27;Community&#x27;</span>) <span class="comment"># 获取文章列表（小类列表）</span></span><br></pre></td></tr></table></figure>

<p>实际内容往往层层嵌套，拿到所有小类并不是终极：</p>
<p>图片区域</p>
<p>上图红框里的<code>a</code>中的<code>href</code>字段才是你想要的链接。那么你需要找到所有小类列表中的<code>&lt;div class=&quot;content&quot;&gt;</code>，再找到<code>a</code>，再去获取<code>a</code>中的<code>href</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if not article_list:</span><br><span class="line">    print(&quot;No article list found.&quot;)</span><br><span class="line"></span><br><span class="line">else:</span><br><span class="line">    article_links = []</span><br><span class="line">    article_items = article_list.find_all(&#x27;div&#x27;, class_=&#x27;content&#x27;)</span><br><span class="line">    for item in article_items:</span><br><span class="line">        a_tag = item.find(&#x27;a&#x27;)</span><br><span class="line">        if a_tag and &#x27;href&#x27; in a_tag.attrs:</span><br><span class="line">            link = a_tag[&#x27;href&#x27;]</span><br><span class="line">            article_links.append(link)</span><br></pre></td></tr></table></figure>

<p>这样就拿到了。后面可以再读取文章内容、标题，然后保存为md什么的，原理是一样的：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> markdownify <span class="keyword">import</span> markdownify <span class="keyword">as</span> md</span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历文章链接，获取文章内容并转换为Markdown格式</span></span><br><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> article_links:</span><br><span class="line">    article_response = requests.get(link, headers=header, verify=<span class="literal">False</span>, timeout=<span class="number">10</span>)</span><br><span class="line">    article_soup = BeautifulSoup(article_response.content, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 提取文章内容</span></span><br><span class="line">    article_content = article_soup.find(<span class="string">&#x27;div&#x27;</span>, <span class="built_in">id</span>=<span class="string">&#x27;content_views&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> article_content:</span><br><span class="line">        <span class="comment"># 转换为Markdown格式</span></span><br><span class="line">        markdown_content = md(<span class="built_in">str</span>(article_content))</span><br><span class="line">    </span><br><span class="line">        <span class="comment"># 获取文章标题</span></span><br><span class="line">        title = article_soup.find(<span class="string">&#x27;h1&#x27;</span>, class_=<span class="string">&#x27;title-article&#x27;</span>).text.strip().replace(<span class="string">&quot; &quot;</span>, <span class="string">&quot;&quot;</span>).replace(<span class="string">&quot;/&quot;</span>, <span class="string">&quot;-&quot;</span>)</span><br><span class="line">    </span><br><span class="line">        <span class="comment"># 保存为Markdown文件</span></span><br><span class="line">        filename = <span class="string">f&quot;<span class="subst">&#123;output_dir&#125;</span>/<span class="subst">&#123;title&#125;</span>.md&quot;</span></span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&#x27;w&#x27;</span>, encoding=<span class="string">&#x27;utf-8&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(markdown_content)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Saved <span class="subst">&#123;filename&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;No content found for <span class="subst">&#123;link&#125;</span>&quot;</span>)</span><br><span class="line">    wait_time = random.uniform(<span class="number">1</span>, <span class="number">10</span>) <span class="comment"># 模拟人类操作</span></span><br><span class="line">    time.sleep(wait_time)</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;All articles have been processed.&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>一些需要注意的小tips：</p>
<p><code>random.uniform</code>: 随机生成一个在[x,y]范围内的实数</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/coding/2024-08-13-python%E7%88%AC%E8%99%AB%E5%9B%BE%E8%A7%A3/" data-id="cmfp6md4p000nsi2bdrvadmlh" data-title="python爬虫图解" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">爬虫</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%BB%91%E7%A7%91%E6%8A%80/" rel="tag">黑科技</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-engineering/2024-08-13-conda环境库信息导出与复原" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/engineering/2024-08-13-conda%E7%8E%AF%E5%A2%83%E5%BA%93%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%A4%8D%E5%8E%9F/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/engineering/">engineering</a>►<a class="article-category-link" href="/categories/engineering/environment/">environment</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/engineering/2024-08-13-conda%E7%8E%AF%E5%A2%83%E5%BA%93%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%A4%8D%E5%8E%9F/">conda环境库信息导出与复原</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>跑评测，跑着跑着conda环境被人改了，直接跑崩，导师让我把环境保存一下，以便以后遇到这种情况可以复原。</p>
<p>下面介绍如何在Conda环境中导出当前所有安装的库（包）的信息，以便在将来某个时刻可以恢复或重建这个环境。</p>
<h1 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h1><p>Conda是一个流行的包管理器和环境管理器，广泛用于Python和其他语言的科学计算。</p>
<p>要导出环境的库信息并保存，你可以按照以下步骤操作：</p>
<ol>
<li><p>打开命令行界面（在Windows上是CMD或PowerShell，在macOS或Linux上是Terminal）。</p>
</li>
<li><p>激活你想要导出的Conda环境。如果你的环境名为<code>myenv</code>，你可以使用以下命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda activate myenv</span><br></pre></td></tr></table></figure></li>
<li><p>使用<code>conda list</code>命令列出环境中所有已安装的包及其版本信息。这将显示一个列表，包括每个包的名称和版本。</p>
</li>
<li><p>导出环境的详细信息。你可以使用<code>conda env export</code>命令将环境的详细信息导出到一个YAML文件中。例如：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="built_in">env</span> <span class="built_in">export</span> &gt; environment.yml</span><br></pre></td></tr></table></figure>

<p>这将创建一个名为<code>environment.yml</code>的文件，其中包含了所有包的列表和版本信息，以及环境的其他配置。</p>
</li>
<li><p>将这个<code>environment.yml</code>文件保存在安全的地方。当你需要重建环境时，你可以使用以下命令：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="built_in">env</span> create -f environment.yml</span><br></pre></td></tr></table></figure>

<p>这将根据<code>environment.yml</code>文件中列出的包和版本信息创建一个新的Conda环境。</p>
</li>
</ol>
<h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><h3 id="用-conda-重新处理整个环境"><a href="#用-conda-重新处理整个环境" class="headerlink" title="用 conda 重新处理整个环境"></a><strong>用 conda 重新处理整个环境</strong></h3><p>如果你希望在同一操作中更新整个环境，包括 Conda 和 <code>pip</code> 依赖，你可以直接通过 <code>conda env update</code> 命令来更新环境。它会尝试安装在 <code>environment.yml</code> 中定义的所有依赖项。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda <span class="built_in">env</span> update --file environment.yml --prune</span><br></pre></td></tr></table></figure>

<p>其中 <code>--prune</code> 参数会移除环境中不再在 <code>yml</code> 文件中列出的包。</p>
<h3 id="检查安装结果"><a href="#检查安装结果" class="headerlink" title="检查安装结果"></a><strong>检查安装结果</strong></h3><p>安装完成后，可以通过以下命令确认所有依赖都已安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip list</span><br></pre></td></tr></table></figure>

<p>通过这种方式，你可以确保你的开发环境的一致性和可重复性，无论在何时何地都可以快速地恢复或重建你的工作环境。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/engineering/2024-08-13-conda%E7%8E%AF%E5%A2%83%E5%BA%93%E4%BF%A1%E6%81%AF%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%A4%8D%E5%8E%9F/" data-id="cmfp6md51001isi2b2je4hvdb" data-title="conda环境库信息导出与复原" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/conda/" rel="tag">conda</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-engineering/2024-08-13-linux删除相关" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/engineering/2024-08-13-linux%E5%88%A0%E9%99%A4%E7%9B%B8%E5%85%B3/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/engineering/">engineering</a>►<a class="article-category-link" href="/categories/engineering/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/engineering/2024-08-13-linux%E5%88%A0%E9%99%A4%E7%9B%B8%E5%85%B3/">linux删除相关</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="常用"><a href="#常用" class="headerlink" title="常用"></a>常用</h1><p>在Linux系统中，您可以使用<code>find</code>命令结合<code>rm</code>命令来删除所有以”temp”开头的<code>.py</code>文件。以下是执行这个操作的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find ./ -<span class="built_in">type</span> f -name <span class="string">&#x27;temp*.py&#x27;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> -f &#123;&#125; \;</span><br></pre></td></tr></table></figure>

<p>这个命令的解释如下：</p>
<ul>
<li><code>find ./</code>：从当前目录开始查找文件。</li>
<li><code>-type f</code>：只查找文件。</li>
<li><code>-name &#39;temp*.py&#39;</code>：查找文件名以”temp”开头，并且扩展名为”.py”的文件。</li>
<li><code>-exec rm -f &#123;&#125; \;</code>：对找到的每个文件执行<code>rm -f</code>命令，<code>-f</code>选项表示强制删除，不提示确认。<code>&#123;&#125;</code>是一个占位符，代表<code>find</code>命令找到的每个文件的路径。</li>
</ul>
<p><strong>注意</strong>：这个命令会递归地搜索整个文件系统，并且删除所有匹配的文件。在执行之前，请确保您了解这个命令的作用，并且已经备份了所有重要的数据。如果您只想在特定目录下执行这个操作，可以将<code>/</code>替换成您想要搜索的目录路径。</p>
<h1 id="linux中快速删除的几种方法"><a href="#linux中快速删除的几种方法" class="headerlink" title="linux中快速删除的几种方法"></a>linux中快速删除的几种方法</h1><h2 id="一-rm-rf"><a href="#一-rm-rf" class="headerlink" title="一. rm -rf"></a>一. rm -rf</h2><p>对于这个命令相信很多很熟悉，甚至一度说rm -rf &#x2F;*是跑路命令，然后实时不然，很多需要删除的文件都需要这个命令，当然使用得当看个人，对于文件量不大情况还是比较有效的，具体如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf &lt;目录或文件&gt;</span><br></pre></td></tr></table></figure>

<p>其中，-r 参数表示递归删除目录及其内容，-f 参数表示强制删除，忽略不存在的文件或目录和删除的确认提示。请注意，该命令将永久删除文件或目录，无法恢复。</p>
<p>以下是几个示例：</p>
<h3 id="1，删除一个文件："><a href="#1，删除一个文件：" class="headerlink" title="1，删除一个文件："></a>1，删除一个文件：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf example.txt</span><br></pre></td></tr></table></figure>

<p>该命令将递归地删除 example.txt 文件。</p>
<h3 id="2，删除一个目录及其内容："><a href="#2，删除一个目录及其内容：" class="headerlink" title="2，删除一个目录及其内容："></a>2，删除一个目录及其内容：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf myDirectory</span><br></pre></td></tr></table></figure>

<p>该命令将递归地删除 myDirectory 目录及其所有内容，包括子目录和文件。</p>
<h3 id="3，删除多个文件或目录："><a href="#3，删除多个文件或目录：" class="headerlink" title="3，删除多个文件或目录："></a>3，删除多个文件或目录：</h3><p>rm -rf file1 file2 dir1 dir2</p>
<p>该命令将递归地删除多个文件和目录。</p>
<h3 id="4，使用通配符删除一类文件："><a href="#4，使用通配符删除一类文件：" class="headerlink" title="4，使用通配符删除一类文件："></a>4，使用通配符删除一类文件：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf *.txt</span><br></pre></td></tr></table></figure>

<p>该命令将递归地删除当前目录下所有以 .txt 结尾的文件。常用通配符如：</p>
<p>1，<code>*</code>：匹配零个或多个字符，用于匹配任意字符串。<br>例如：rm -rf prefix*，可以删除以 “prefix” 开头的所有文件。</p>
<p>2，<code>?</code>：匹配一个字符，用于匹配单个字符。<br>例如：rm -rf file?.txt，可以删除名为 “file1.txt”、“file2.txt” 等的文件。</p>
<p>3，<code>[]</code>：匹配括号内的任意一个字符。<br>例如：rm -rf [abc]*，可以删除以 “a”、“b” 或 “c” 开头的文件。</p>
<p>4，<code>&#123;&#125;</code>：用逗号分隔的一组项，匹配其中的任意一项。<br>例如：rm -rf {file1,file2}.txt，可以删除 “file1.txt” 和 “file2.txt”。</p>
<h3 id="5，使用循环结构来批量删除多个目录："><a href="#5，使用循环结构来批量删除多个目录：" class="headerlink" title="5，使用循环结构来批量删除多个目录："></a>5，使用循环结构来批量删除多个目录：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for dir in dir1 dir2 dir3; do rm -rf &quot;$dir&quot;; done</span><br></pre></td></tr></table></figure>

<p>该命令将递归地删除当前目录下的目录 dir1、dir2 和 dir3。</p>
<h3 id="6，删除特定目录下的一类文件："><a href="#6，删除特定目录下的一类文件：" class="headerlink" title="6，删除特定目录下的一类文件："></a>6，删除特定目录下的一类文件：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /path/to/directory/*.log</span><br></pre></td></tr></table></figure>

<p>该命令将递归地删除 &#x2F;path&#x2F;to&#x2F;directory 目录下所有以 .log 结尾的文件。以下是对您提供的文本内容进行格式处理的结果：</p>
<hr>
<h2 id="二-使用-rm-或-rmdir-删除文件夹及文件"><a href="#二-使用-rm-或-rmdir-删除文件夹及文件" class="headerlink" title="二. 使用 rm 或 rmdir 删除文件夹及文件"></a>二. 使用 <code>rm</code> 或 <code>rmdir</code> 删除文件夹及文件</h2><h3 id="1-删除空文件夹："><a href="#1-删除空文件夹：" class="headerlink" title="1. 删除空文件夹："></a>1. 删除空文件夹：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rmdir</span> foldername</span><br></pre></td></tr></table></figure>

<p>此命令用于删除名为 <code>foldername</code> 的空文件夹。如果文件夹不为空，即包含内容或子文件夹，则命令会报错。</p>
<h3 id="2-递归删除文件夹及其内容："><a href="#2-递归删除文件夹及其内容：" class="headerlink" title="2. 递归删除文件夹及其内容："></a>2. 递归删除文件夹及其内容：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -r foldername</span><br></pre></td></tr></table></figure>

<p>该命令递归地删除名为 <code>foldername</code> 的文件夹及其所有内容，包括子文件夹和文件。执行前请确保这是您的意图。</p>
<hr>
<h2 id="三-比-rm-rf-更高效的删除方法"><a href="#三-比-rm-rf-更高效的删除方法" class="headerlink" title="三. 比 rm -rf 更高效的删除方法"></a>三. 比 <code>rm -rf</code> 更高效的删除方法</h2><p>如果 <code>rm -rf</code> 命令在删除大量文件时速度较慢，可以尝试以下更高效的方法：</p>
<ol>
<li><p>使用 <code>find</code> 命令结合 <code>-delete</code> 参数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/folder -<span class="built_in">type</span> f -delete</span><br></pre></td></tr></table></figure>

<p>此命令仅删除指定路径 <code>/path/to/folder</code> 中的文件，不删除文件夹本身，比 <code>rm -rf</code> 更高效，因为它避免了递归遍历子文件夹。</p>
</li>
<li><p>使用 <code>rsync</code> 命令删除文件夹：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rsync -a --delete empty_folder/ path/to/folder/</span><br></pre></td></tr></table></figure>

<p>此方法通过将空文件夹 <code>empty_folder</code> 同步到目标文件夹 <code>path/to/folder</code> 上，实际上清空了目标文件夹的内容。</p>
</li>
</ol>
<hr>
<h2 id="四-查询目前存在的文件个数"><a href="#四-查询目前存在的文件个数" class="headerlink" title="四. 查询目前存在的文件个数"></a>四. 查询目前存在的文件个数</h2><p>若需查询文件夹中文件和文件夹的数量，可以使用 <code>ls</code> 命令结合一些选项和管道操作符。以下是几种查询方式：</p>
<ol>
<li><p>查询文件夹中的文件和文件夹总数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -lA foldername | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>

<p>此命令列出 <code>foldername</code> 中的所有文件和文件夹（包括隐藏的），并计算总数。</p>
</li>
<li><p>查询文件夹中的文件个数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -lA foldername | grep -v <span class="string">&#x27;^d&#x27;</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>

<p>此命令列出 <code>foldername</code> 中的所有文件，过滤掉文件夹，并计算文件数量。</p>
</li>
<li><p>查询文件夹中的文件夹个数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -lA foldername | grep <span class="string">&#x27;^d&#x27;</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>

<p>此命令列出 <code>foldername</code> 中的所有文件夹，并计算文件夹数量。</p>
</li>
</ol>
<hr>
<p>请注意，上述命令中的 <code>foldername</code>、<code>/path/to/folder</code> 和 <code>empty_folder</code> 应替换为实际的文件夹路径。</p>
<p><strong>上述是个人根据常用命令结合官网做的总结，欢迎指导，当删除还是要结合自己需要慎用</strong><br>————————————————<br>参考链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/MatChen/article/details/135404591">https://blog.csdn.net/MatChen/article/details/135404591</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/engineering/2024-08-13-linux%E5%88%A0%E9%99%A4%E7%9B%B8%E5%85%B3/" data-id="cmfp6md52001lsi2b7mhsbf2k" data-title="linux删除相关" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-engineering/2024-08-13-linux软链接相关" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/engineering/2024-08-13-linux%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%9B%B8%E5%85%B3/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/engineering/">engineering</a>►<a class="article-category-link" href="/categories/engineering/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/engineering/2024-08-13-linux%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%9B%B8%E5%85%B3/">linux软链接相关|含批量脚本</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="创建软链接"><a href="#创建软链接" class="headerlink" title="创建软链接"></a>创建软链接</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s [源文件或目录] [目标文件或目录]</span><br></pre></td></tr></table></figure>

<h2 id="修改软链接"><a href="#修改软链接" class="headerlink" title="修改软链接"></a>修改软链接</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> --snf [新的源文件或目录] [目标文件或目录]</span><br></pre></td></tr></table></figure>

<h2 id="删除软链接"><a href="#删除软链接" class="headerlink" title="删除软链接"></a>删除软链接</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> -rf 软链接名称</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rm</span> 软链接名称 <span class="comment"># 不加 -rf 也可以</span></span><br></pre></td></tr></table></figure>

<h2 id="查看帮助"><a href="#查看帮助" class="headerlink" title="查看帮助"></a>查看帮助</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> --<span class="built_in">help</span></span><br></pre></td></tr></table></figure>

<h2 id="批量更新软链接源文件路径"><a href="#批量更新软链接源文件路径" class="headerlink" title="批量更新软链接源文件路径"></a>批量更新软链接源文件路径</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义旧的和新的源文件路径前缀</span></span><br><span class="line">old_path_prefix=<span class="string">&quot;/123/&quot;</span></span><br><span class="line">new_path_prefix=<span class="string">&quot;/456/&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 遍历当前目录下的所有软链接</span></span><br><span class="line"><span class="keyword">for</span> symlink <span class="keyword">in</span> $(find . -<span class="built_in">type</span> l); <span class="keyword">do</span></span><br><span class="line">    <span class="comment"># 使用 readlink 命令获取软链接的绝对路径</span></span><br><span class="line">    target=$(<span class="built_in">readlink</span> -e <span class="string">&quot;<span class="variable">$symlink</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 检查目标路径是否以旧路径前缀开头</span></span><br><span class="line">    <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$target</span>&quot;</span> == <span class="string">&quot;<span class="variable">$old_path_prefix</span>&quot;</span>* ]]; <span class="keyword">then</span></span><br><span class="line">        <span class="comment"># 构造新的软链接路径</span></span><br><span class="line">        new_target=<span class="string">&quot;<span class="variable">$&#123;target/$old_path_prefix/$new_path_prefix&#125;</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 输出将要进行的操作</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Updating symlink <span class="variable">$symlink</span> to point to <span class="variable">$new_target</span>&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 更新软链接的源文件路径</span></span><br><span class="line">        <span class="built_in">ln</span> -sfn <span class="string">&quot;<span class="variable">$new_target</span>&quot;</span> <span class="string">&quot;<span class="variable">$symlink</span>&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Symlink update completed.&quot;</span></span><br></pre></td></tr></table></figure>

<p>将此脚本保存为 <code>.sh</code> 文件，然后拖放到目标目录中运行。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/engineering/2024-08-13-linux%E8%BD%AF%E9%93%BE%E6%8E%A5%E7%9B%B8%E5%85%B3/" data-id="cmfp6md54001ssi2bbqm0bufk" data-title="linux软链接相关|含批量脚本" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%BB%91%E7%A7%91%E6%8A%80/" rel="tag">黑科技</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-engineering/2024-08-13-transformers.Trainer中wandb的关闭" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/engineering/2024-08-13-transformers.Trainer%E4%B8%ADwandb%E7%9A%84%E5%85%B3%E9%97%AD/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/engineering/">engineering</a>►<a class="article-category-link" href="/categories/engineering/LLM/">LLM</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/engineering/2024-08-13-transformers.Trainer%E4%B8%ADwandb%E7%9A%84%E5%85%B3%E9%97%AD/">transformers.Trainer中wandb的关闭</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="wandb关闭"><a href="#wandb关闭" class="headerlink" title="wandb关闭"></a>wandb关闭</h1><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[INFO|integration_utils.py:750] 2024-07-08 16:22:45,186 &gt;&gt; Automatic Weights &amp; Biases logging enabled, to disable set os.environ[&quot;WANDB_DISABLED&quot;] = &quot;true&quot;</span><br><span class="line">wandb: WARNING The `run_name` is currently set to the same value as `TrainingArguments.output_dir`. If this was not intended, please specify a different run name by setting the `TrainingArguments.run_name` parameter.</span><br><span class="line">wandb: Network error (SSLError), entering retry loop.</span><br><span class="line">wandb: W&amp;B API key is configured. Use `wandb login --relogin` to force relogin</span><br><span class="line">wandb: Network error (SSLError), entering retry loop.</span><br><span class="line">wandb: ERROR Run initialization has timed out after 90.0 sec.</span><br><span class="line">wandb: ERROR Please refer to the documentation for additional information: https://docs.wandb.ai/guides/track/tracking-faq#initstarterror-error-communicating-with-wandb-process-</span><br></pre></td></tr></table></figure>

<p>使用transformers.Trainer过程中，wandb连不上，想着直接关了算了。</p>
<h2 id="1-在Python代码中设置路径"><a href="#1-在Python代码中设置路径" class="headerlink" title="1. 在Python代码中设置路径"></a>1. 在Python代码中设置路径</h2><p>在代码最前面写：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.environ[<span class="string">&quot;WANDB_DISABLED&quot;</span>]=<span class="string">&quot;true&quot;</span></span><br></pre></td></tr></table></figure>

<p>这样做的缺点是会报警告信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Using the `WANDB_DISABLED` environment variable is deprecated and will be removed in v5. Use the --report_to flag to control the integrations used for logging results (for instance --report_to none).</span><br></pre></td></tr></table></figure>

<p>另外，使用模型训练pipeline时，一般也不会想要进到已成型的脚本里再做改动，这种思路总感觉怪怪的，缺乏可拓展性和稳定性。</p>
<h2 id="2-在TrainingArguments中设置入参"><a href="#2-在TrainingArguments中设置入参" class="headerlink" title="2. 在TrainingArguments中设置入参"></a>2. 在TrainingArguments中设置入参</h2><p>在TrainingArguments的入参中设置<code>report_to=&quot;none&quot;</code>（事实上这也是第一种方法警告信息中推荐的方案）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">report_to: none</span><br></pre></td></tr></table></figure>

<p>实践中往往在yaml文件中找到train参数的位置，贴上去即可。<br>此处还尝试过改成<code>report_to: tensorboard</code>，结果tensorboard也没打开：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">File &quot;/home/ma-user/anaconda3/envs/chatglm/lib/python3.10/site-packages/transformers/trainer_callback.py&quot;, line 421, in add_callback</span><br><span class="line">    cb = callback() if isinstance(callback, type) else callback</span><br><span class="line">  File &quot;/home/ma-user/anaconda3/envs/chatglm/lib/python3.10/site-packages/transformers/integrations/integration_utils.py&quot;, line 603, in __init__</span><br><span class="line">    raise RuntimeError(</span><br><span class="line">RuntimeError: TensorBoardCallback requires tensorboard to be installed. Either update your PyTorch version or install tensorboardX.</span><br></pre></td></tr></table></figure>

<p>直接<code>none</code>解千愁得了。</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="https://discuss.huggingface.co/t/how-to-turn-wandb-off-in-trainer/6237/9">How to turn WanDB off in trainer? - #9 by mspinaci - Beginners - Hugging Face Forums</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/engineering/2024-08-13-transformers.Trainer%E4%B8%ADwandb%E7%9A%84%E5%85%B3%E9%97%AD/" data-id="cmfp6md55001usi2bgmk3bthf" data-title="transformers.Trainer中wandb的关闭" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/transformers/" rel="tag">transformers</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/" rel="tag">模型训练</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%BB%91%E7%A7%91%E6%8A%80/" rel="tag">黑科技</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-engineering/2024-08-13-两台Linux机器传文件" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/engineering/2024-08-13-%E4%B8%A4%E5%8F%B0Linux%E6%9C%BA%E5%99%A8%E4%BC%A0%E6%96%87%E4%BB%B6/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/engineering/">engineering</a>►<a class="article-category-link" href="/categories/engineering/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/engineering/2024-08-13-%E4%B8%A4%E5%8F%B0Linux%E6%9C%BA%E5%99%A8%E4%BC%A0%E6%96%87%E4%BB%B6/">两台Linux机器传文件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>本来用的是xftp里直接传，结果速度很慢而且直接给哥们C盘干爆了。<br>难道这种方式传输也是要走本地的？不然为什么C盘会爆？<br>取消任务之后就好了，说明就是传输过程经过了本地的C盘。<br>所以还是去找别的办法，依稀记得有个scp方法：</p>
<p>scp<br>【优点】简单方便，安全可靠；支持限速参数</p>
<p>【缺点】不支持排除目录</p>
<p>【用法】</p>
<p>scp就是secure copy，是用来进行远程文件拷贝的。数据传输使用 ssh，并且和ssh 使用相同的认证方式，提供相同的安全保证 。</p>
<p>命令格式：</p>
<p>scp [参数] &lt;源地址（用户名@IP地址或主机名）&gt;:&lt;文件路径&gt; &lt;目的地址（用户名 @IP 地址或主机名）&gt;:&lt;文件路径&gt;</p>
<p>举例：</p>
<p>scp &#x2F;home&#x2F;work&#x2F;source.txt <a href="mailto:&#x77;&#x6f;&#x72;&#107;&#64;&#49;&#x39;&#50;&#x2e;&#x31;&#x36;&#56;&#46;&#48;&#x2e;&#x31;&#x30;">work@192.168.0.10</a>:&#x2F;home&#x2F;work&#x2F; #把本地的source.txt文件拷贝到192.168.0.10机器上的&#x2F;home&#x2F;work目录下</p>
<p>scp <a href="mailto:&#x77;&#x6f;&#114;&#107;&#64;&#49;&#57;&#50;&#46;&#49;&#54;&#x38;&#46;&#48;&#46;&#x31;&#48;">work@192.168.0.10</a>:&#x2F;home&#x2F;work&#x2F;source.txt &#x2F;home&#x2F;work&#x2F; #把192.168.0.10机器上的source.txt文件拷贝到本地的&#x2F;home&#x2F;work目录下</p>
<p>scp <a href="mailto:&#119;&#x6f;&#114;&#107;&#64;&#x31;&#57;&#50;&#46;&#x31;&#54;&#x38;&#x2e;&#48;&#x2e;&#49;&#x30;">work@192.168.0.10</a>:&#x2F;home&#x2F;work&#x2F;source.txt <a href="mailto:&#x77;&#111;&#x72;&#x6b;&#x40;&#x31;&#x39;&#50;&#x2e;&#49;&#x36;&#x38;&#46;&#x30;&#x2e;&#x31;&#49;">work@192.168.0.11</a>:&#x2F;home&#x2F;work&#x2F; #把192.168.0.10机器上的source.txt文件拷贝到192.168.0.11机器的&#x2F;home&#x2F;work目录下</p>
<p>scp -r &#x2F;home&#x2F;work&#x2F;sourcedir <a href="mailto:&#x77;&#111;&#114;&#x6b;&#64;&#x31;&#x39;&#x32;&#x2e;&#x31;&#x36;&#56;&#46;&#48;&#x2e;&#x31;&#48;">work@192.168.0.10</a>:&#x2F;home&#x2F;work&#x2F; #拷贝文件夹，加-r参数</p>
<p>scp -r &#x2F;home&#x2F;work&#x2F;sourcedir <a href="mailto:&#x77;&#111;&#x72;&#107;&#x40;&#119;&#x77;&#119;&#x2e;&#x6d;&#x79;&#x68;&#111;&#x73;&#116;&#x2e;&#x63;&#x6f;&#x6d;">work@www.myhost.com</a>:&#x2F;home&#x2F;work&#x2F; #使用主机名</p>
<p>scp -r -v &#x2F;home&#x2F;work&#x2F;sourcedir <a href="mailto:&#x77;&#x6f;&#114;&#x6b;&#64;&#119;&#119;&#x77;&#46;&#109;&#121;&#x68;&#111;&#x73;&#116;&#46;&#x63;&#111;&#x6d;">work@www.myhost.com</a>:&#x2F;home&#x2F;work&#x2F; #显示详情，加-v参数<br>————————————————</p>
<p>原文链接：<a target="_blank" rel="noopener" href="https://blog.csdn.net/FL1768317420/article/details/136989778">https://blog.csdn.net/FL1768317420/article/details/136989778</a></p>
<p>但当时看到这个方法后，觉得没看到做认证的地方啊？<br>所以一直没用，首先用了设好认证的xftp。<br>现在走投无路，用了一个日志文件传了一下试试，结果控制台是会出现一个让你输入password的部分，输入回车后就直接开始传输了，非常便捷，而且速度很快。</p>
<p>注意事项：不用写端口，写了反而报错。直接<a href="mailto:&#119;&#x6f;&#x72;&#x6b;&#x40;&#49;&#57;&#50;&#x2e;&#49;&#54;&#56;&#x2e;&#x30;&#x2e;&#x31;&#49;">work@192.168.0.11</a>:&#x2F;home&#x2F;work&#x2F;，冒号后面直接跟目标文件夹即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/engineering/2024-08-13-%E4%B8%A4%E5%8F%B0Linux%E6%9C%BA%E5%99%A8%E4%BC%A0%E6%96%87%E4%BB%B6/" data-id="cmfp6md55001ysi2b59g7amxt" data-title="两台Linux机器传文件" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/" rel="tag">文件传输</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-engineering/2024-08-13-脚本内指定GPU部署" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/engineering/2024-08-13-%E8%84%9A%E6%9C%AC%E5%86%85%E6%8C%87%E5%AE%9AGPU%E9%83%A8%E7%BD%B2/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/engineering/">engineering</a>►<a class="article-category-link" href="/categories/engineering/GPU/">GPU</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/engineering/2024-08-13-%E8%84%9A%E6%9C%AC%E5%86%85%E6%8C%87%E5%AE%9AGPU%E9%83%A8%E7%BD%B2/">脚本内指定GPU部署</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="CUDA设备配置"><a href="#CUDA设备配置" class="headerlink" title="CUDA设备配置"></a>CUDA设备配置</h1><h2 id="设置脚本可见的GPU卡号"><a href="#设置脚本可见的GPU卡号" class="headerlink" title="设置脚本可见的GPU卡号"></a>设置脚本可见的GPU卡号</h2><p>在脚本开头添加以下代码，以指定脚本可见的GPU卡号范围：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置环境变量，只显示4, 5, 6, 7号GPU</span></span><br><span class="line">os.environ[<span class="string">&#x27;CUDA_VISIBLE_DEVICES&#x27;</span>] = <span class="string">&#x27;4,5,6,7&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><ul>
<li>经过上述设置后，对于脚本而言，这四张卡的编号将会是 <code>&quot;0, 1, 2, 3&quot;</code>，即根据可见卡重新排列了索引。</li>
<li>在此脚本内的任何GPU部署都不会影响到其他卡，因为此脚本看不到其他卡了。</li>
</ul>
<h2 id="模型加载示例"><a href="#模型加载示例" class="headerlink" title="模型加载示例"></a>模型加载示例</h2><p>以下是使用指定设备映射加载模型的示例代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoModelForCausalLM</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型路径</span></span><br><span class="line">model_path = <span class="string">&#x27;path_to_your_model&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载模型，指定数据类型、内存使用优化、信任远程代码，并自动设置设备映射</span></span><br><span class="line">model = AutoModelForCausalLM.from_pretrained(</span><br><span class="line">    model_path,</span><br><span class="line">    torch_dtype=torch.bfloat16,</span><br><span class="line">    low_cpu_mem_usage=<span class="literal">True</span>,</span><br><span class="line">    trust_remote_code=<span class="literal">True</span>,</span><br><span class="line">    device_map=<span class="string">&quot;auto&quot;</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><code>device_map</code> 参数可以自由设置，不会影响其他人的卡。</p>
<h2 id="附赠"><a href="#附赠" class="headerlink" title="附赠"></a>附赠</h2><p>查看GPU进程全名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi --query-compute-apps=process\_name --format=csv</span><br></pre></td></tr></table></figure>

<p>查看GPU信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/engineering/2024-08-13-%E8%84%9A%E6%9C%AC%E5%86%85%E6%8C%87%E5%AE%9AGPU%E9%83%A8%E7%BD%B2/" data-id="cmfp6md560020si2bgwc76b8h" data-title="脚本内指定GPU部署" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CUDA/" rel="tag">CUDA</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GPU/" rel="tag">GPU</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-math/2024-08-13-泰勒公式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/08/13/math/2024-08-13-%E6%B3%B0%E5%8B%92%E5%85%AC%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2024-08-13T01:06:31.000Z" itemprop="datePublished">2024-08-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/math/">math</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/08/13/math/2024-08-13-%E6%B3%B0%E5%8B%92%E5%85%AC%E5%BC%8F/">泰勒公式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>泰勒公式是数学分析中的一个重要工具，它用于将一个复杂函数在某一点附近用多项式逼近。这个公式由英国数学家布鲁克·泰勒（Brook Taylor）在1715年提出。泰勒公式的基本思想是，如果一个函数在某一点处足够光滑（即具有足够高的连续导数），那么该函数在该点附近可以用一个多项式来近似表示。</p>
<h3 id="泰勒公式的形式"><a href="#泰勒公式的形式" class="headerlink" title="泰勒公式的形式"></a>泰勒公式的形式</h3><p>假设函数$f(x)$在点$a$处有$n+1$阶连续导数，那么对于$x$在$a$附近的值，函数$f(x)$可以表示为：</p>
<p>$$<br>f(x) &#x3D; f(a) + f’(a)(x-a) + \frac{f’’(a)}{2!}(x-a)^2 + \cdots + \frac{f^{(n)}(a)}{n!}(x-a)^n + R_n(x)<br>$$</p>
<p>其中，$f^{(n)}(a)$表示函数$f(x)$在点$a$处的第$n$阶导数，$R_n(x)$是余项，表示多项式逼近的误差。</p>
<h3 id="余项-R-n-x"><a href="#余项-R-n-x" class="headerlink" title="余项$R_n(x)$"></a>余项$R_n(x)$</h3><p>余项$R_n(x)$有多种形式，常见的两种是拉格朗日余项和皮亚诺余项：</p>
<ol>
<li><strong>拉格朗日余项</strong>：</li>
</ol>
<p>  $$<br>   R_n(x) &#x3D; \frac{f^{(n+1)}(\xi)}{(n+1)!}(x-a)^{n+1}<br>  $$</p>
<p>   其中$\xi$是介于$a$和$x$之间的一个数。<br>2. <strong>皮亚诺余项</strong>：</p>
<p>  $$<br>   R_n(x) &#x3D; o((x-a)^n)<br>  $$</p>
<p>   表示当$x$趋近于$a$时，余项$R_n(x)$是比$(x-a)^n$更高阶的无穷小。</p>
<h3 id="泰勒公式的应用"><a href="#泰勒公式的应用" class="headerlink" title="泰勒公式的应用"></a>泰勒公式的应用</h3><p>泰勒公式在数学和物理学中有广泛的应用，例如：</p>
<ul>
<li><strong>函数逼近</strong>：通过泰勒公式，可以用多项式近似复杂函数，简化计算。</li>
<li><strong>数值分析</strong>：在数值计算中，泰勒公式用于估计误差和提高计算精度。</li>
<li><strong>微分方程</strong>：在求解微分方程时，泰勒公式可以用于展开解函数，便于分析和计算。</li>
</ul>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><p>考虑函数$f(x) &#x3D; e^x$在$x &#x3D; 0$处的泰勒展开：</p>
<p>$$<br>e^x &#x3D; 1 + x + \frac{x^2}{2!} + \frac{x^3}{3!} + \cdots + \frac{x^n}{n!} + R_n(x)<br>$$</p>
<p>其中，$f^{(n)}(0) &#x3D; e^0 &#x3D; 1$对于所有$n$，因此：</p>
<p>$$<br>e^x &#x3D; 1 + x + \frac{x^2}{2} + \frac{x^3}{6} + \cdots + \frac{x^n}{n!} + R_n(x)<br>$$</p>
<p>这个展开式在数值计算中非常有用，特别是在计算$e^x$的近似值时。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/08/13/math/2024-08-13-%E6%B3%B0%E5%8B%92%E5%85%AC%E5%BC%8F/" data-id="cmfp6md5n003ysi2bbohqdtj2" data-title="泰勒公式" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/latex/" rel="tag">latex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%87%AA%E7%84%B6%E5%93%B2%E5%AD%A6%E7%9A%84%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86/" rel="tag">自然哲学的数学原理</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/coding/">coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/debug/">debug</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/debug/coding/">coding</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/debug/linux/">linux</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/diary/">diary</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/diary/24%E5%B9%B4/">24年</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/">engineering</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/GPU/">GPU</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/LLM/">LLM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/environment/">environment</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/pool/">pool</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/win/">win</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/%E5%8A%A0%E9%80%9F/">加速</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/engineering/%E6%A8%A1%E5%9E%8B%E5%B7%A5%E7%A8%8B/">模型工程</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/environment/">environment</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/game/">game</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/language/">language</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/language/english/">english</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/math/">math</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A3%A8%E5%88%80/">磨刀</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%A3%A8%E5%88%80/obsidian/">obsidian</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E8%80%83/">软考</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%BD%AF%E8%80%83/%E5%85%AC%E5%85%B1%E8%AF%BE/">公共课</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/A2E4D/" rel="tag">A2E4D</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CUDA/" rel="tag">CUDA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Elasticsearch/" rel="tag">Elasticsearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPU/" rel="tag">GPU</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SD/" rel="tag">SD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLite/" rel="tag">SQLite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/conda/" rel="tag">conda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/curl/" rel="tag">curl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/environment/" rel="tag">environment</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/latex/" rel="tag">latex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ppo/" rel="tag">ppo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell%E8%84%9A%E6%9C%AC/" rel="tag">shell脚本</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/" rel="tag">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/transformers/" rel="tag">transformers</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/win/" rel="tag">win</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%8B%E8%BD%BD/" rel="tag">下载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B/" rel="tag">多进程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%82%E6%AD%A5-%E5%8D%8F%E7%A8%8B/" rel="tag">异步&#x2F;协程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" rel="tag">数据处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="tag">数据结构</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/" rel="tag">文件传输</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/" rel="tag">模型训练</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2/" rel="tag">模型部署</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" rel="tag">版本管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8C%AB%E5%9B%BD%E5%BB%BA%E8%AE%BE%E8%80%85/" rel="tag">猫国建设者</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%A7%8B%E5%88%80%E9%B1%BC-%E6%98%AF%E5%A4%A7%E8%87%A3%E7%B2%BE%E8%AE%B2/" rel="tag">秋刀鱼-是大臣精讲</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86/" rel="tag">笔记管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BA%BF%E7%A8%8B/" rel="tag">线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%98%E5%9B%BE/" rel="tag">绘图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%87%AA%E7%84%B6%E5%93%B2%E5%AD%A6%E7%9A%84%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86/" rel="tag">自然哲学的数学原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%8B%B1%E8%AF%AD%E5%85%94%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" rel="tag">英语兔语法学习笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BA%E6%96%87/" rel="tag">论文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" rel="tag">软件工程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%BB%91%E7%A7%91%E6%8A%80/" rel="tag">黑科技</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/A2E4D/" style="font-size: 10px;">A2E4D</a> <a href="/tags/CUDA/" style="font-size: 10px;">CUDA</a> <a href="/tags/Elasticsearch/" style="font-size: 12px;">Elasticsearch</a> <a href="/tags/GPU/" style="font-size: 10px;">GPU</a> <a href="/tags/SD/" style="font-size: 10px;">SD</a> <a href="/tags/SQLite/" style="font-size: 10px;">SQLite</a> <a href="/tags/conda/" style="font-size: 12px;">conda</a> <a href="/tags/curl/" style="font-size: 10px;">curl</a> <a href="/tags/docker/" style="font-size: 14px;">docker</a> <a href="/tags/environment/" style="font-size: 14px;">environment</a> <a href="/tags/github/" style="font-size: 12px;">github</a> <a href="/tags/latex/" style="font-size: 10px;">latex</a> <a href="/tags/linux/" style="font-size: 20px;">linux</a> <a href="/tags/ppo/" style="font-size: 10px;">ppo</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/shell%E8%84%9A%E6%9C%AC/" style="font-size: 10px;">shell脚本</a> <a href="/tags/ssh/" style="font-size: 12px;">ssh</a> <a href="/tags/transformers/" style="font-size: 10px;">transformers</a> <a href="/tags/win/" style="font-size: 12px;">win</a> <a href="/tags/%E4%B8%8B%E8%BD%BD/" style="font-size: 10px;">下载</a> <a href="/tags/%E5%A4%9A%E8%BF%9B%E7%A8%8B/" style="font-size: 10px;">多进程</a> <a href="/tags/%E5%BC%82%E6%AD%A5-%E5%8D%8F%E7%A8%8B/" style="font-size: 10px;">异步/协程</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" style="font-size: 14px;">数据处理</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 10px;">数据结构</a> <a href="/tags/%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93/" style="font-size: 10px;">文件传输</a> <a href="/tags/%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/" style="font-size: 12px;">模型训练</a> <a href="/tags/%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2/" style="font-size: 10px;">模型部署</a> <a href="/tags/%E7%88%AC%E8%99%AB/" style="font-size: 12px;">爬虫</a> <a href="/tags/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" style="font-size: 10px;">版本管理</a> <a href="/tags/%E7%8C%AB%E5%9B%BD%E5%BB%BA%E8%AE%BE%E8%80%85/" style="font-size: 10px;">猫国建设者</a> <a href="/tags/%E7%A7%8B%E5%88%80%E9%B1%BC-%E6%98%AF%E5%A4%A7%E8%87%A3%E7%B2%BE%E8%AE%B2/" style="font-size: 10px;">秋刀鱼-是大臣精讲</a> <a href="/tags/%E7%AC%94%E8%AE%B0%E7%AE%A1%E7%90%86/" style="font-size: 12px;">笔记管理</a> <a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 10px;">线程</a> <a href="/tags/%E7%BB%98%E5%9B%BE/" style="font-size: 10px;">绘图</a> <a href="/tags/%E8%87%AA%E7%84%B6%E5%93%B2%E5%AD%A6%E7%9A%84%E6%95%B0%E5%AD%A6%E5%8E%9F%E7%90%86/" style="font-size: 14px;">自然哲学的数学原理</a> <a href="/tags/%E8%8B%B1%E8%AF%AD%E5%85%94%E8%AF%AD%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 16px;">英语兔语法学习笔记</a> <a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 12px;">论文</a> <a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" style="font-size: 10px;">软件工程</a> <a href="/tags/%E9%BB%91%E7%A7%91%E6%8A%80/" style="font-size: 18px;">黑科技</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/09/">September 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/07/">July 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/05/">May 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/04/">April 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/02/">February 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/01/">January 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/09/18/aaa/">aaa</a>
          </li>
        
          <li>
            <a href="/2025/09/18/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2025/07/10/pool/2025-07-10-%E6%89%B9%E9%87%8F%E8%B0%83%E6%95%B4python%E8%84%9A%E6%9C%ACimport%E9%A1%BA%E5%BA%8F/">批量调整python脚本import顺序</a>
          </li>
        
          <li>
            <a href="/2025/05/22/pool/2025-05-22-sphinx%E6%96%87%E6%A1%A3%E6%9E%84%E5%BB%BA%E7%AC%94%E8%AE%B0/">sphinx文档构建笔记</a>
          </li>
        
          <li>
            <a href="/2025/05/06/pool/2025-05-06-AIR%20A%20Systematic%20Analysis%20of%20Annotations,%20Instructions,%20and%20Response%20Pairs%20in%20Preference%20Dataset/">AIR: A Systematic Analysis of Annotations, Instructions, and Response Pairs in Preference Dataset</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>